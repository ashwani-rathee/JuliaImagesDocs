<!DOCTYPE html><HTML lang="en"><head><script charset="utf-8" src="../../../../../assets/default/multidoc_injector.js" type="text/javascript"></script><script charset="utf-8" type="text/javascript">window.MULTIDOCUMENTER_ROOT_PATH = '/'</script><script charset="utf-8" src="../../../../../assets/default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../assets/default/flexsearch_integration.js" type="text/javascript"></script><meta charset="UTF-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>Layer Compositing · JuliaImages</title><script data-outdated-warner="" src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script data-main="../../../assets/documenter.js" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" data-theme-name="documenter-dark" data-theme-primary-dark="" href="../../../assets/themes/documenter-dark.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="documenter-light" data-theme-primary="" href="../../../assets/themes/documenter-light.css" rel="stylesheet" type="text/css"/><script src="../../../assets/themeswap.js"></script><link href="../../../democards/gridtheme.css" rel="stylesheet" type="text/css"/><link href="../../../../../assets/default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../../../../assets/default/flexsearch.css" rel="stylesheet" type="text/css"/></head><body><nav id="multi-page-nav"><div class="hidden-on-mobile" id="nav-items"><a class="nav-link active nav-item" href="..\..\..\../">Home</a><div class="nav-dropdown"><button class="nav-item dropdown-label">Package Ecosystem</button><div class="nav-dropdown-container nav-mega-dropdown-container"><div class="nav-mega-column"><div class="column-header">High Level Packages</div><ul class="column-content"><a class="nav-link nav-item" href="..\..\..\..\..\filter\dev/">ImageFiltering</a><a class="nav-link nav-item" href="..\..\..\..\..\qrcoders/">QRCoders</a><a class="nav-link nav-item" href="..\..\..\..\..\transformations/">ImageTransformations</a><a class="nav-link nav-item" href="..\..\..\..\..\features\dev/">ImageFeatures</a><a class="nav-link nav-item" href="..\..\..\..\..\binarization/">ImageBinarization</a><a class="nav-link nav-item" href="..\..\..\..\..\exif/">ExifViewer</a><a class="nav-link nav-item" href="..\..\..\..\..\morphology/">ImageMorphology</a></ul></div><div class="nav-mega-column"><div class="column-header">Visualisation &amp; Drawing</div><ul class="column-content"><a class="nav-link nav-item" href="..\..\..\..\..\imgdraw\dev/">ImageDraw</a></ul></div></div></div><div class="search nav-item"><input id="search-input" placeholder="Search..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding">/</div></div></div><button id="multidoc-toggler"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg></button></nav><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img alt="JuliaImages logo" src="../../../assets/logo.png"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">JuliaImages</a></span></div><form action="../../../search/" class="docs-search"><input class="docs-search-query" id="documenter-search-query" name="q" placeholder="Search docs" type="text"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><a class="tocitem" href="../../../install/">Getting started</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../../tutorials/quickstart/">Quickstart</a></li><li><a class="tocitem" href="../../../tutorials/arrays_colors/">Arrays, Numbers, and Colors</a></li><li><a class="tocitem" href="../../../tutorials/conversions_views/">Conversions vs. views</a></li><li><a class="tocitem" href="../../../tutorials/indexing/">Arrays: more advanced indexing</a></li></ul></li><li><span class="tocitem">Packages</span><ul><li><a class="tocitem" href="../../../pkgs/">Introduction</a></li><li><a class="tocitem" href="../../../pkgs/axes/">ImageAxes.jl</a></li><li><a class="tocitem" href="../../../pkgs/metadata/">ImageMetaData.jl</a></li><li><a class="tocitem" href="../../../pkgs/segmentation/">ImageSegmentation.jl</a></li><li><a class="tocitem" href="../../../pkgs/transformations/">ImageTransformations.jl</a></li><li><a class="tocitem" href="../../../pkgs/features/">ImageFeatures.jl</a></li></ul></li><li><a class="tocitem" href="../../">Demos</a></li><li><a class="tocitem" href="../../../function_reference/">References</a></li><li><a class="tocitem" href="../../../api_comparison/">Comparison with other image processing frameworks</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="">Layer Compositing</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="">Layer Compositing</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaImages/juliaimages.github.io/blob/source/docs/examples/spatial_transformation/layer_compositing.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" href="#" id="documenter-settings-button" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" href="#" id="documenter-sidebar-button"></a></div></header><article class="content" id="documenter-page"><h1 id="Layer-Compositing"><a class="docs-heading-anchor" href="#Layer-Compositing">Layer Compositing</a><a id="Layer-Compositing-1"></a><a class="docs-heading-anchor-permalink" href="#Layer-Compositing" title="Permalink"></a></h1><p><a href="../layer_compositing.jl"><img alt="Source code" src="https://img.shields.io/badge/download-julia-brightgreen.svg"/></a><img alt="Author" src="https://img.shields.io/badge/Author-Johnny%20Chen-blue"/><img alt="Update time" src="https://img.shields.io/date/1583539200"/></p><p>This demonstration shows how the layer version <a href="https://en.wikipedia.org/wiki/Alpha_compositing">alpha compositing</a> can be done in 10 lines of code using <a href="https://github.com/JuliaArrays/OffsetArrays.jl">OffsetArrays</a> and <a href="https://github.com/JuliaArrays/PaddedViews.jl">PaddedViews</a>. If you are looking for more well-organized utilities, <a href="https://github.com/kimikage/ColorBlendModes.jl">ColorBlendModes</a> provides the definitions and compositing operations of the blend modes.</p><pre><code class="language-julia hljs">using Images
using OffsetArrays # provide `OffsetArray`</code></pre><h2 id=".-basic-offset-and-pad-operation"><a class="docs-heading-anchor" href="#.-basic-offset-and-pad-operation">1. basic offset and pad operation</a><a id=".-basic-offset-and-pad-operation-1"></a><a class="docs-heading-anchor-permalink" href="#.-basic-offset-and-pad-operation" title="Permalink"></a></h2><p>Assume that we have two objects with transparent color and we want to place them on a canvas with partially overlapping.</p><pre><code class="language-julia hljs">red_patch = fill(RGBA(1., 0., 0., 1), 24, 24)
green_patch = fill(RGBA(0., 1., 0., 1), 32, 32)
mosaicview(red_patch, green_patch; npad=20, nrow=1, fillvalue=colorant"white")</code></pre><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAABACAYAAACOXDxbAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAMFJREFUeAHtwcENwzAAxDAZ0P4ru90gz15Qkd4vMutw+GeSDJNkmCTDJBkmyTBJhkkyTJ6cw6vdS95LkmGSDJNkmCTDJBkmyTBJhkkyTJJhkgyTZJgkwyQZJskwSYZJMkySYZIMk2SYJMMkGSbJMEmGSTJMkmGSDJNkmCTDJBkmyTBJhkkyTJJhkgyTZJgkwyQZJskwSYZJMkySYZIMk2SYJMMkGSbJMEmGyZN7SX5FkmGSDJNkmCTDJBkmyTBJhn0ASLcI/Vuud5MAAAAASUVORK5CYII="/><p>Assume the canvas axes starts from <code>(1, 1)</code>, here we keep the red patch unshifted, and shift the green patch 6 pixels downward and 16 pixels rightward, and then pad them to a common axes</p><pre><code class="language-julia hljs">green_o = OffsetArray(green_patch, 6, 16)
r, g = paddedviews(Gray(0.2), red_patch, green_o)
mosaicview(r, g; npad=20, nrow=1, fillvalue=colorant"white")</code></pre><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOgAAABMCAYAAABnJPuAAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAPhJREFUeAHtwVEVwkAAA7B+1NHOv4JNE8igeyTpJ/nkxc515c3u+86yc074nQaY1QCzGmBWA8xqgFkNMKsBZjXArAaY1QCzGmBWA8Oe+8k/a4BZDTCrAWY1wKwGmNUAsxpgVgPMaoBZDTCrAWY1wKwGmNUAsxpgVgPMaoBZDTCrAWY1wKwGmNUAsxpgVgPMaoBZDTCrAWY1wKwGmNUAsxpgVgPMaoBZDTCrAWb1XFeATQ0wqwFmNcCsBpjVALMaYFYDzGqAWQ0wqwFmNcCsBpjVALMaYFYDzGqAWQ0wqwFmNcCsBpjVALMaYFYDzGqAWQ0wqwFmNcCsL7fDCckPJXstAAAAAElFTkSuQmCC"/><p>Note that their axes and sizes are changed after shifting and padding:</p><pre><code class="language-julia hljs"># Regardless of implementaion details, `Base.OneTo(32)` is mostly equivalent to `1:32`
println("before shifting -- size: ", size(green_patch), " axes: ", axes(green_patch))
println("after shifting  -- size: ", size(green_o), " axes: ", axes(green_o))
println("after padding   -- size: ", size(g), " axes: ", axes(g))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">before shifting -- size: (32, 32) axes: (Base.OneTo(32), Base.OneTo(32))
after shifting  -- size: (32, 32) axes: (OffsetArrays.IdOffsetRange(values=7:38, indices=7:38), OffsetArrays.IdOffsetRange(values=17:48, indices=17:48))
after padding   -- size: (38, 48) axes: (Base.IdentityUnitRange(1:38), Base.IdentityUnitRange(1:48))</code></pre><p>Axes are preserved after padding, which means you can easily get original image from padded results using</p><pre><code class="language-julia hljs">r[axes(red_patch)...]
g[axes(green_o)...]</code></pre><p>As described <a href="https://en.wikipedia.org/wiki/Alpha_compositing">here</a>, there are several compositing methods:</p><pre><code class="language-julia hljs"># add operation
out_add = r .+ g

# clear operation
out_clear = copy(r)
out_clear[axes(green_o)...] .= colorant"black"

# multiply operation
out_mul = copy(r)
# channel-wise multiplication
channelview(out_mul)[:, axes(green_o)...] .*= channelview(green_o)

# overlap operation
out_over = copy(r)
out_over[axes(green_o)...] .= green_o

# display the results of these operation
mosaicview(out_add, out_clear, out_mul, out_over;
           npad=20, nrow=1, fillvalue=colorant"white")</code></pre><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfgAAABMCAYAAACBBKWoAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAZBJREFUeAHtwdFx41gAAzBqhh0997Q1pSerplwR+bDFA9Dfc37zYP/OyZP9/Pzkq11Xnux1Tp7s/X7nq11Xnux1Tp7s/X7nq11Xnux1Tp6sAQDmNADAnAYAmNMAAHMaAGBOAwDMaQCAOQ0AMKcBAOY0AMCcBgCY03za+85f3GHZlT+677Dryl/dYdf1mz+682QNADCnAQDmNADAnAYAmNMAAHMaAGBOAwDMaQCAOQ0AMKcBAOY0AMCcBgCY0wAAcxoAYE4DAMxpAIA5DQAwpwEA5jQAwJwGAJjTAABzGgBgTgMAzGkAgDkNADCnAQDmNADAnAYAmNMAAHMaAGBOAwDMaQCAOQ0AMKcBAOY0AMCc/jsnn3SHb/Y6Jx913+F7vc7JZ93he73OyWfd+T9rAIA5DQAwpwEA5jQAwJwGAJjTAABzGgBgTgMAzGkAgDkNADCnAQDmNADAnAYAmNMAAHMaAGBOAwDMaQCAOQ0AMKcBAOY0AMCcBgCY0wAAcxoAYE4DAMxpAIA5DQAwpwEA5vwHO+waARQFjVUAAAAASUVORK5CYII="/><h2 id=".-build-the-three-primary-color-panel"><a class="docs-heading-anchor" href="#.-build-the-three-primary-color-panel">2. build the three-primary color panel</a><a id=".-build-the-three-primary-color-panel-1"></a><a class="docs-heading-anchor-permalink" href="#.-build-the-three-primary-color-panel" title="Permalink"></a></h2><p>Now, let's use the same trick to build something more meaningful. First we create three circles with colors red, green and blue</p><pre><code class="language-julia hljs">using ImageDraw
function make_circle(sz, c::T) where T
    # fill with transparent color to avoid black region
    fillvalue = ARGB(c)
    img = fill(ARGB{eltype(T)}(0., 0., 0., 0.), sz...)
    origin = sz .÷ 2
    r = sz .÷ 4
    draw!(img, Ellipse(origin..., r...), fillvalue)
    img
end

# create three circles with color red, green and blue
red_c   = make_circle((256, 256), ARGB(1., 0., 0., 1.))
green_c = make_circle((256, 256), ARGB(0., 1., 0., 1.))
blue_c  = make_circle((256, 256), ARGB(0., 0., 1., 1.))

mosaicview(red_c, green_c, blue_c; nrow=1)</code></pre><img src="data:image/png;base64,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"/><p>Then, shift these circles to appropriate positions, pad them to common axes, and finally composite using the add operation:</p><pre><code class="language-julia hljs">r = size(red_c, 1) ÷ 8
red_o   = OffsetArray(red_c,    r,  r)
green_o = OffsetArray(green_c, -r,  0)
blue_o  = OffsetArray(blue_c,   r, -r)

color_panel = sum(paddedviews(zero(eltype(red_o)), red_o, green_o, blue_o))
color_panel = color_panel[axes(red_c)...] # crop empty region</code></pre><img src="data:image/png;base64,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"/><hr/><p><em>This page was generated using <a href="https://github.com/johnnychen94/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label></p><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div><p></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Sunday 21 May 2023 10:08">Sunday 21 May 2023</span>. Using Julia version 1.9.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></HTML>