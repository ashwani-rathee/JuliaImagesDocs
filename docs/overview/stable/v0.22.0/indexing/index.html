<!DOCTYPE html><HTML lang="en"><head><script charset="utf-8" src="../../../assets/default/multidoc_injector.js" type="text/javascript"></script><script charset="utf-8" type="text/javascript">window.MULTIDOCUMENTER_ROOT_PATH = '/'</script><script charset="utf-8" src="../../../assets/default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../../assets/default/flexsearch_integration.js" type="text/javascript"></script><meta charset="UTF-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>Arrays: more advanced indexing · JuliaImages</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script data-main="../assets/documenter.js" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../democards/cardtheme.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="documenter-dark" href="../assets/themes/documenter-dark.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="documenter-light" data-theme-primary="" href="../assets/themes/documenter-light.css" rel="stylesheet" type="text/css"/><script src="../assets/themeswap.js"></script><link href="../../../assets/default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../../assets/default/flexsearch.css" rel="stylesheet" type="text/css"/></head><body><nav id="multi-page-nav"><div class="hidden-on-mobile" id="nav-items"><a class="nav-link active nav-item" href="..\../">Home</a><div class="nav-dropdown"><button class="nav-item dropdown-label">Package Ecosystem</button><div class="nav-dropdown-container nav-mega-dropdown-container"><div class="nav-mega-column"><div class="column-header">High Level Packages</div><ul class="column-content"><a class="nav-link nav-item" href="..\..\..\filter/">ImageFiltering</a><a class="nav-link nav-item" href="..\..\..\corners/">ImageCorners</a><a class="nav-link nav-item" href="..\..\..\quantization/">ColorQuantization</a><a class="nav-link nav-item" href="..\..\..\opencv/">OpenCV</a><a class="nav-link nav-item" href="..\..\..\smooth/">ImageSmooth</a><a class="nav-link nav-item" href="..\..\..\transformations/">ImageTransformations</a><a class="nav-link nav-item" href="..\..\..\features\dev/">ImageFeatures</a><a class="nav-link nav-item" href="..\..\..\exif/">ExifViewer</a></ul></div><div class="nav-mega-column"><div class="column-header">Visualisation &amp; Drawing</div><ul class="column-content"><a class="nav-link nav-item" href="..\..\..\imgdraw\dev/">ImageDraw</a></ul></div></div></div><div class="search nav-item"><input id="search-input" placeholder="Search..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding">/</div></div></div><button id="multidoc-toggler"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg></button></nav><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img alt="JuliaImages logo" src="../assets/logo.png"/></a><div class="docs-package-name"><span class="docs-autofit">JuliaImages</span></div><form action="../search/" class="docs-search"><input class="docs-search-query" id="documenter-search-query" name="q" placeholder="Search docs" type="text"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../install/">Getting started: Installation and testing your install</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../quickstart/">Quickstart</a></li><li><a class="tocitem" href="../arrays_colors/">Arrays, Numbers, and Colors</a></li><li><a class="tocitem" href="../conversions_views/">Conversions vs. views</a></li><li class="is-active"><a class="tocitem" href="">Arrays: more advanced indexing</a><ul class="internal"><li><a class="tocitem" href="#Keeping-track-of-location-with-unconventional-indices-1"><span>Keeping track of location with unconventional indices</span></a></li><li><a class="tocitem" href="#Keeping-track-of-orientation-with-named-axes-1"><span>Keeping track of orientation with named axes</span></a></li></ul></li><li><a class="tocitem" href="../imageaxes/">ImageAxes.jl</a></li><li><a class="tocitem" href="../imagefiltering/">ImageFiltering.jl</a></li><li><a class="tocitem" href="../imagemetadata/">ImageMetadata.jl</a></li><li><a class="tocitem" href="../imagesegmentation/">ImageSegmentation.jl</a></li><li><a class="tocitem" href="../imagetransformations/">ImageTransformations.jl</a></li><li><a class="tocitem" href="../imagefeatures/">ImageFeatures.jl</a></li><li><a class="tocitem" href="../troubleshooting/">Installation troubleshooting</a></li></ul></li><li><a class="tocitem" href="../democards/examples/">Demos</a></li><li><a class="tocitem" href="../function_reference/">Summary and function reference</a></li><li><a class="tocitem" href="../api_comparison/">Comparison with other image processing frameworks</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href="">Arrays: more advanced indexing</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="">Arrays: more advanced indexing</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaImages/juliaimages.github.io/blob/source/docs/src/indexing.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" href="#" id="documenter-settings-button" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" href="#" id="documenter-sidebar-button"></a></div></header><article class="content" id="documenter-page"><h1 id="Arrays:-more-advanced-indexing-1"><a class="docs-heading-anchor" href="#Arrays:-more-advanced-indexing-1">Arrays: more advanced indexing</a><a class="docs-heading-anchor-permalink" href="#Arrays:-more-advanced-indexing-1" title="Permalink"></a></h1><p>In addition to the handling of numbers and colors, one of the main ways that JuliaImages leverages Julia is through a number of more sophisticated indexing operations. These are perhaps best illustrated with examples.</p><h2 id="Keeping-track-of-location-with-unconventional-indices-1"><a class="docs-heading-anchor" href="#Keeping-track-of-location-with-unconventional-indices-1">Keeping track of location with unconventional indices</a><a class="docs-heading-anchor-permalink" href="#Keeping-track-of-location-with-unconventional-indices-1" title="Permalink"></a></h2><p>Consider the following pair of images:</p><table><tbody><tr><th style="text-align: center">imgref</th><th style="text-align: center">img</th></tr><tr><td style="text-align: center"><img alt="cameraman" src="../assets/indexing/cm.png"/></td><td style="text-align: center"><img alt="cameraman" src="../assets/indexing/cmrot.png"/></td></tr></tbody></table><p>You might guess that the one on the right is a rotated version of the one on the left. But, what is the angle? Is there also a translation?</p><p>A "low tech" way to test this is to rotate and shift the image on the right until it seems aligned with the one on the left. We could overlay the two images (<a href="../conversions_views/#Using-colorview-to-make-color-overlays-1">Using colorview to make color overlays</a>) to see how well we're doing.</p><pre><code class="language-julia-repl">julia&gt; using Images, CoordinateTransformations

julia&gt; tfm = recenter(RotMatrix(pi/8), center(img))
AffineMap([0.92388 -0.382683; 0.382683 0.92388], [88.7786, -59.3199])

julia&gt; imgrot = warp(img, tfm);

julia&gt; summary(img)
"386×386 Array{Gray{N0f8},2} with eltype Gray{Normed{UInt8,8}}"

julia&gt; summary(imgrot)
"OffsetArray(::Array{Gray{N0f8},2}, -59:446, -59:446) with eltype Gray{Normed{UInt8,8}} with indices -59:446×-59:446"</code></pre><p>While <code>img</code> has axes that start with the conventional 1, the summary of <code>imgrot</code> reports that it has axes <code>(-59:446, -59:446)</code>. This means that the first element of <code>imgrot</code> is indexed with <code>imgrot[-59,-59]</code> and the last element with <code>imgrot[446,446]</code>.</p><p>What is the meaning of these indices that extend beyond those of the original array in both directions? Displaying the rotated image–-especially when overlaid on the original–-reveals why:</p><pre><code class="language-julia">julia&gt; imgov = colorview(RGB, paddedviews(0, img, imgrot, zeroarray)...)</code></pre><p><img alt="rot_overlay" src="../assets/indexing/rot_overlay.png"/></p><p>The padding on all sides of the array leaves space for the fact that the rotated image (green) contains some pixels out of the region covered by the original image (red).  The fact that Julia allows these indices to be <em>negative</em> means that we have no trouble adding appropriate "padding" to the original image: we just copy the original over to the padded array, using its original indices.</p><p>We can test whether <code>imgrot</code> aligns well with the original unrotated image <code>imgref</code> at the top of this page:</p><pre><code class="language-julia">julia&gt; imgov_ref = colorview(RGB, paddedviews(0, imgref, imgrot, zeroarray)...)</code></pre><p><img alt="ref_overlay" src="../assets/indexing/ref_overlay.png"/></p><p>The fact that the overlapping portion looks yellow–-the combination of red and green–-indicates that we have perfect alignment.</p><p>You can learn more about Julia's support for arbitrary indices in <a href="https://julialang.org/blog/2017/04/offset-arrays">this blog post</a>.</p><h2 id="Keeping-track-of-orientation-with-named-axes-1"><a class="docs-heading-anchor" href="#Keeping-track-of-orientation-with-named-axes-1">Keeping track of orientation with named axes</a><a class="docs-heading-anchor-permalink" href="#Keeping-track-of-orientation-with-named-axes-1" title="Permalink"></a></h2><p>Suppose you are presented with a 3-dimensional grayscale image. Is this a movie (2d over time), or a 3d image (x, y, and z)? In such situations, one of the best ways to keep yourself oriented is by naming the axes. The TestImages package contains an example of a file that illustrates this:</p><pre><code class="language-julia-repl">julia&gt; using Images, TestImages

julia&gt; img = testimage("mri");

julia&gt; println(summary(img))
3-dimensional AxisArray{Gray{N0f8},3,...} with axes:
    :P, 0:1:225
    :R, 0:1:185
    :S, 0:5:130
And data, a 226×186×27 Array{Gray{N0f8},3} with eltype Gray{Normed{UInt8,8}}</code></pre><p>TestImages uses the <a href="https://github.com/JuliaArrays/AxisArrays.jl">AxisArrays package</a> to name the axes of this particular image in terms of the <a href="http://www.grahamwideman.com/gw/brain/orientation/orientterms.htm">RAS coordinate system</a> (Right, Anterior, Superior) as commonly used in magnetic resonance imaging. See the documentation for that package to learn more about how you can create your own <code>AxisArray</code> objects.</p><p>We can use this coordinate system to help with visualization. Let's look at a "horizontal slice," one perpendicular to the superior-inferior axis (i.e., a slice with constant <code>S</code> value):</p><p><img alt="Sslice" src="../assets/indexing/mri_s_slice.png"/></p><p>From the summary you can see that the slice has just the <code>:A</code> and <code>:R</code> axes remaining.</p><p>We could slice along the <code>R</code> and <code>A</code> axes too, although for this image (which is sampled very anisotropically) they are not as informative.</p><p>The <a href="https://github.com/JuliaImages/ImageAxes.jl">ImageAxes</a> and <a href="https://github.com/JuliaImages/ImageMetadata.jl">ImageMetadata</a> packages add additional functionality to AxisArrays that may be useful when you need to encode more information about your image.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../conversions_views/">« Conversions vs. views</a><a class="docs-footer-nextpage" href="../imageaxes/">ImageAxes.jl »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label></p><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div><p></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 18 February 2020 11:46">Tuesday 18 February 2020</span>. Using Julia version 1.0.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></HTML>